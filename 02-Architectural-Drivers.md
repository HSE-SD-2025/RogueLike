# 2. Архитектурные драйверы

### Матрица решений

| Архитектурный драйвер | Затрагиваемые компоненты | Принятое архитектурное решение |
| :--- | :--- | :--- |
| **Высокая модифицируемость** (добавление новых аномалий, артефактов, мутантов) | Логика игры, Система контента | **Архитектура Entity-Component-System (ECS).** Поведение и данные отделены. Конфигурации артефактов и мутантов вынесены в JSON-файлы для редактирования без перекомпиляции. |
| **Процедурная генерация сложных уровней** | Генератор Мира | **Композитный генератор.** Используется несколько "слоев" генерации: 1) Генератор ландшафта, 2) Генератор размещения аномальных полей, 3) Генератор расстановки врагов и лута. Использование `seed` для воспроизводимости. |
| **Сложная система правил и взаимодействий** (радиация, эффекты артефактов) | Движок правил (Rules Engine) | **Паттерн "Стратегия"** для эффектов артефактов и аномалий. **Паттерн "Состояние"** для состояний игрока (Норма, Отравлен, Облучен). Логика эффектов инкапсулирована и не "размазана" по коду. |
| **Тестируемость** (изолированный тест боя, эффекта артефакта) | Все компоненты | **Разделение логики и представления (UI).** Игровую логику можно запустить и протестировать через скрипты без участия игрока и рендеринга. Детерминированная генерация по `seed` для тестов. |
| **Отзывчивый графический интерфейс** | Модуль рендера (Renderer) | **Полное отделение рендера от логики.** Игровой цикл сначала полностью просчитывает состояние мира, а затем передает готовый набор объектов для отрисовки. Это исключает задержки интерфейса. |
